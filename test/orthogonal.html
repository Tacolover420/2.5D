<html>
    <head>
        <title>Orthogonal 3D Testing</title>
        <style>
            #mainCanvas {
                border: 1px solid black;
            }
        </style>
    </head>
    <body>
        <canvas id="mainCanvas" width=600 height=600></canvas>
        
        <script>
            const mainCanvas = document.getElementById("mainCanvas");
            const ctx = mainCanvas.getContext("2d");
            
            const points = [];
            class Point {
                constructor(x, y, z) {
                    this.x = x;
                    this.y = y;
                    this.z = z;
                }
            }
            const lines = [];
            class Line {
                constructor(p1, p2) {
                    this.p1 = p1;
                    this.p2 = p2;
                }
            }
            const faces = [];
            class Face {
                constructor(p1, p2, p3) {
                    this.p1 = p1;
                    this.p2 = p2;
                    this.p3 = p3;
                }
            }
            
            /*
            points.push(new Point(-100, -100, -100));
            points.push(new Point(100, 100, -100));
            points.push(new Point(-100, 100, -100));
            points.push(new Point(100, -100, -100));
            points.push(new Point(-100, -100, 100));
            points.push(new Point(100, 100, 100));
            points.push(new Point(-100, 100, 100));
            points.push(new Point(100, -100, 100));
            
            lines.push(new Line(new Point(0, 0, 0), new Point(-1000, 0, 0)));
            lines.push(new Line(new Point(100, 100, 100), new Point(100, -100, 100)));
            lines.push(new Line(new Point(100, 100, -100), new Point(100, -100, -100)));
            lines.push(new Line(new Point(100, 100, 100), new Point(100, 100, -100)));
            lines.push(new Line(new Point(100, -100, -100), new Point(100, -100, 100)));
            lines.push(new Line(new Point(100, 100, 100), new Point(0, 0, 0)));
            lines.push(new Line(new Point(100, 100, -100), new Point(0, 0, 0)));
            lines.push(new Line(new Point(100, -100, 100), new Point(0, 0, 0)));
            lines.push(new Line(new Point(100, -100, -100), new Point(0, 0, 0)));
            
            points.push(new Point(0, 0, 0));
            points.push(new Point(0, 20, 0));
            points.push(new Point(0, -20, 0));
            points.push(new Point(0, 0, 20));
            points.push(new Point(0, 20, 20));
            points.push(new Point(0, -20, 20));
            points.push(new Point(0, 0, -20));
            points.push(new Point(0, 20, -20));
            points.push(new Point(0, -20, -20));
            points.push(new Point(-20, 0, 0));
            
            faces.push(new Face(new Point(100, 100, 100), new Point(-100, 100, 100), new Point(-100, 100, -100)));
            faces.push(new Face(new Point(100, 100, 100), new Point(100, 100, -100), new Point(-100, 100, -100)));
            faces.push(new Face(new Point(100, 100, 100), new Point(-100, 100, 100), new Point(-100, -100, 100)));
            */
            
            faces.push(new Face(new Point(100, 100, 100), new Point(-100, 100, 100), new Point(-100, 100, -100)));
            faces.push(new Face(new Point(100, 100, 100), new Point(100, 100, -100), new Point(-100, 100, -100)));
            faces.push(new Face(new Point(100, 100, -70), new Point(100, -100, -70), new Point(-100, -100, -70)));
            
            /*points.push(new Point(0, 0, 100));
            points.push(new Point(0, 0, 0));
            points.push(new Point(100, 0, 0));
            points.push(new Point(0, 100, 0));*/
            
            for (var i = 0; i < 100; i++) {
                points.push(new Point(Math.random() * 400 - 200, Math.random() * 400 - 200, Math.random() * 400 - 200));
            }
            
            let zRot = 0, // Rotation z axis
                rotUp = Math.PI / 8; // Rotation up/down
            
            render();
            function render() {
                ctx.clearRect(0, 0, mainCanvas.width, mainCanvas.height);
                
                for (let i = 0; i < faces.length; i++) {
                    const p1 = project(faces[i].p1),
                          p2 = project(faces[i].p2),
                          p3 = project(faces[i].p3);
                    
                    ctx.beginPath();
                    ctx.moveTo(p1.x, p1.y);
                    ctx.lineTo(p2.x, p2.y);
                    ctx.lineTo(p3.x, p3.y);
                    ctx.closePath();
                    ctx.fillStyle = "hsla(" + (i * 50) + ", 80%, 30%, 0.5)";
                    ctx.fill();
                }
                
                for (let i = 0; i < lines.length; i++) {
                    const p1 = project(lines[i].p1),
                          p2 = project(lines[i].p2);
                    
                    ctx.beginPath();
                    ctx.moveTo(p1.x, p1.y);
                    ctx.lineTo(p2.x, p2.y);
                    ctx.strokeStyle = "hsl(" + (i * 50) + ", 80%, 70%)";
                    ctx.stroke();
                }
                
                for (let i = 0; i < points.length; i++) {
                    const p = project(points[i]);
                    
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, 5, 0, Math.PI*2);
                    ctx.fillStyle = "hsl(" + (i * 50) + ", 80%, 50%)";
                    ctx.fill();
                }
                
                
                zRot += 0.015;
                requestAnimationFrame(render);
            }
            
            function project(point) {
                const x = mainCanvas.width/2 + point.y * Math.cos(zRot) + point.x * Math.sin(zRot),
                      y = mainCanvas.height/2 - point.z * Math.cos(rotUp) - (point.x * Math.cos(zRot) - point.y * Math.sin(zRot)) * Math.sin(rotUp);
                
                return {
                    x: x,
                    y: y
                };
            }
        </script>
    </body>
</html>